{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { FormField, Button, Heading, Combobox } from 'evergreen-ui';\nimport styled from 'styled-components';\nimport { Query, Mutation } from 'react-apollo';\nimport _ from 'underscore';\nimport { ALL_CATS_QUERY } from './DonationForm';\nconst Styles = styled.div.withConfig({\n  displayName: \"AdoptionForm__Styles\",\n  componentId: \"tea8n5-0\"\n})([\"background-color:white;padding:2rem 5rem;\"]);\nconst CREATE_ADOPTION_MUTATION = gql`\n    mutation CREATE_ADOPTION_MUTATION(\n        $catId: Int!\n    ){ \n        createAdoption(catId: $catId)\n            {\n                adoption{\n                    id\n                }\n            }\n      }\n`;\n\nclass AdoptionForm extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      catId: null,\n      name: '',\n      image: \"static/image/stripe.jpg\"\n    });\n\n    _defineProperty(this, \"saveToState\", e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    });\n  }\n\n  render() {\n    return __jsx(Query, {\n      query: ALL_CATS_QUERY\n    }, ({\n      data\n    }) => {\n      const catsName = _.pluck(data.allCats, \"name\");\n\n      let cat = _.where(data.allCats, {\n        name: this.state.cat\n      })[0];\n\n      let image = cat ? cat.image : this.state.image;\n      return __jsx(Styles, null, __jsx(FormField, null, __jsx(Heading, {\n        size: 500,\n        marginTop: \"default\"\n      }, \"Allocation\"), __jsx(Combobox, {\n        name: \"allocation\",\n        openOnFocus: true,\n        width: 400,\n        items: catsName,\n        onChange: selected => {\n          this.setState({\n            name: selected,\n            catId: _.where(data.allCats, {\n              name: selected\n            })[0].id,\n            image: _.where(data.allCats, {\n              name: selected\n            })[0].image\n          });\n        },\n        placeholder: \"Select a Cat\"\n      }), __jsx(\"div\", {\n        style: {\n          height: '200px'\n        }\n      }, __jsx(\"img\", {\n        style: {\n          height: \"100%\",\n          borderRadius: \"50%\",\n          margin: '3rem'\n        },\n        src: image,\n        alt: \"cat photo\"\n      })), __jsx(Mutation, {\n        mutation: CREATE_ADOPTION_MUTATION,\n        variables: {\n          catId: this.state.catId\n        }\n      }, createAdoption => __jsx(Button, {\n        onClick: createAdoption,\n        height: 50,\n        marginTop: 50,\n        appearance: \"primary\",\n        intent: \"success\"\n      }, \"Adopt\"))));\n    });\n  }\n\n}\n\nexport default AdoptionForm;","map":null,"metadata":{},"sourceType":"module"}