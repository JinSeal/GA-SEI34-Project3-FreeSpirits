{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/jinz/Projects/project3/frontend/components/Signin.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport Form from './styles/Form';\nimport Error from './ErrorMessage';\nimport { CURRENT_USER_QUERY } from './User';\nconst SIGNIN_MUTATION = gql`\n  mutation SIGNIN_MUTATION($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n      token\n    }\n  }\n`;\n\nclass Signin extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      username: '',\n      password: '',\n      email: ''\n    });\n\n    _defineProperty(this, \"saveToState\", e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    });\n  }\n\n  render() {\n    return __jsx(Mutation, {\n      mutation: SIGNIN_MUTATION,\n      variables: this.state,\n      refetchQueries: [{\n        query: CURRENT_USER_QUERY\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27\n      },\n      __self: this\n    }, (signup, {\n      error,\n      loading\n    }) => __jsx(Form, {\n      method: \"post\",\n      onSubmit: async e => {\n        e.preventDefault();\n        const res = await signup();\n        console.log(res);\n        this.setState({\n          username: '',\n          email: '',\n          password: ''\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }, __jsx(\"fieldset\", {\n      disabled: loading,\n      \"aria-busy\": loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, __jsx(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, \"Sign into your account\"), __jsx(Error, {\n      error: error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }), __jsx(\"label\", {\n      htmlFor: \"username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Username\", __jsx(\"input\", {\n      type: \"username\",\n      name: \"username\",\n      placeholder: \"username\",\n      value: this.state.username,\n      onChange: this.saveToState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    })), __jsx(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"Password\", __jsx(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"password\",\n      value: this.state.password,\n      onChange: this.saveToState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    })), __jsx(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Sign In!\"))));\n  }\n\n}\n\nexport default Signin;","map":{"version":3,"sources":["/Users/jinz/Projects/project3/frontend/components/Signin.js"],"names":["React","Component","Mutation","gql","Form","Error","CURRENT_USER_QUERY","SIGNIN_MUTATION","Signin","username","password","email","e","setState","target","name","value","render","state","query","signup","error","loading","preventDefault","res","console","log","saveToState"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,SAASC,kBAAT,QAAmC,QAAnC;AAEA,MAAMC,eAAe,GAAGJ,GAAI;;;;;;CAA5B;;AAQA,MAAMK,MAAN,SAAqBP,SAArB,CAA+B;AAAA;AAAA;;AAAA,mCACrB;AACNQ,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,KAAK,EAAE;AAHD,KADqB;;AAAA,yCAMfC,CAAC,IAAI;AACjB,WAAKC,QAAL,CAAc;AAAE,SAACD,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASE;AAA5B,OAAd;AACD,KAR4B;AAAA;;AAS7BC,EAAAA,MAAM,GAAG;AACP,WACE,MAAC,QAAD;AACE,MAAA,QAAQ,EAAEV,eADZ;AAEE,MAAA,SAAS,EAAE,KAAKW,KAFlB;AAGE,MAAA,cAAc,EAAE,CAAC;AAAEC,QAAAA,KAAK,EAAEb;AAAT,OAAD,CAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKG,CAACc,MAAD,EAAS;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAT,KACC,MAAC,IAAD;AACE,MAAA,MAAM,EAAC,MADT;AAEE,MAAA,QAAQ,EAAE,MAAMV,CAAN,IAAW;AACnBA,QAAAA,CAAC,CAACW,cAAF;AACA,cAAMC,GAAG,GAAG,MAAMJ,MAAM,EAAxB;AACAK,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AAEA,aAAKX,QAAL,CAAc;AAAEJ,UAAAA,QAAQ,EAAE,EAAZ;AAAgBE,UAAAA,KAAK,EAAE,EAAvB;AAA2BD,UAAAA,QAAQ,EAAE;AAArC,SAAd;AACD,OARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAUE;AAAU,MAAA,QAAQ,EAAEY,OAApB;AAA6B,mBAAWA,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,EAEE,MAAC,KAAD;AAAO,MAAA,KAAK,EAAED,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE;AAAO,MAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,WAAW,EAAC,UAHd;AAIE,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWT,QAJpB;AAKE,MAAA,QAAQ,EAAE,KAAKkB,WALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAHF,EAaE;AAAO,MAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,WAAW,EAAC,UAHd;AAIE,MAAA,KAAK,EAAE,KAAKT,KAAL,CAAWR,QAJpB;AAKE,MAAA,QAAQ,EAAE,KAAKiB,WALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAbF,EAwBE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAxBF,CAVF,CANJ,CADF;AA+CD;;AAzD4B;;AA4D/B,eAAenB,MAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport Form from './styles/Form';\nimport Error from './ErrorMessage';\nimport { CURRENT_USER_QUERY } from './User';\n\nconst SIGNIN_MUTATION = gql`\n  mutation SIGNIN_MUTATION($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n      token\n    }\n  }\n`;\n\nclass Signin extends Component {\n  state = {\n    username: '',\n    password: '',\n    email: '',\n  };\n  saveToState = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n  render() {\n    return (\n      <Mutation\n        mutation={SIGNIN_MUTATION}\n        variables={this.state}\n        refetchQueries={[{ query: CURRENT_USER_QUERY }]}\n      >\n        {(signup, { error, loading }) => (\n          <Form\n            method=\"post\"\n            onSubmit={async e => {\n              e.preventDefault();\n              const res = await signup();\n              console.log(res);\n\n              this.setState({ username: '', email: '', password: '' });\n            }}\n          >\n            <fieldset disabled={loading} aria-busy={loading}>\n              <h2>Sign into your account</h2>\n              <Error error={error} />\n              <label htmlFor=\"username\">\n                Username\n                <input\n                  type=\"username\"\n                  name=\"username\"\n                  placeholder=\"username\"\n                  value={this.state.username}\n                  onChange={this.saveToState}\n                />\n              </label>\n              <label htmlFor=\"password\">\n                Password\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"password\"\n                  value={this.state.password}\n                  onChange={this.saveToState}\n                />\n              </label>\n\n              <button type=\"submit\">Sign In!</button>\n            </fieldset>\n          </Form>\n        )}\n      </Mutation>\n    );\n  }\n}\n\nexport default Signin;\n"]},"metadata":{},"sourceType":"module"}